---
title: "How to use the Pandora Data Package"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{How to use the Pandora Package}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)

os_linux <- Sys.info()["sysname"] == "Linux"
```

```{r setup}
library(Pandora)
library(magrittr)
```

# Introduction

This vignette provides an overview of the basic functions within the Pandora 
Data package, allowing users to explore and retrieve information about networks, 
repositories, file types, and resources.


# Show all Networks

To show all available networks use the `getNetworks()` function:

```{r networks}
networks <- getNetworks()
networks %>% 
  knitr::kable()
```

# List Repositories

To list all available repositories use the `getRepositories()` function. You can 
filter the output using the `network` and `pattern` arguments. For instance, to 
list all repositories in the `IsoMemo` network:

```{r repositories}
reposIsomemo <- getRepositories(
  network = "IsoMemo"
  )

reposIsomemo[c("Repository")]  %>% 
  knitr::kable()
```

# List Available File Types

Use the `getFileTypes()` function to list all available file types. The 
following example showcases file types available in the 'IsoMemo' network:

```{r filetypes}
fileTypesIsomemo <- getFileTypes(network = "isomemo")
fileTypesIsomemo  %>% 
  knitr::kable()
```

# Filter Resources by pattern or File Type

To list all available resources, employ the `getResources()` function. Filter 
the output using the `network`, `repository`, `fileType`, and `pattern` 
arguments. For instance, to list all CSV files whose meta information contains the string `plants`:


```{r resources}
resourcesPlants <- getResources(
  fileType = c("csv"),
  pattern = "plant"
  )

resourcesPlants[c("name", "format")]  %>% 
  knitr::kable()
```

# Get the data of a Specific Resource

To retrieve data from a specific resource, use the `getData()` function. The 
example below demonstrates fetching data from the 
`14CARHU - Radiocarbon Dates of Helsinki University` resource:


```{r getdata}
isotopicData <- getData(
  name = "14CARHU - Radiocarbon Dates of Helsinki University") 
isotopicData  %>% 
  head(5)  %>% 
  knitr::kable()
```
For text files one can specify the separator using the helper function `dataOptions()`:

```{r getdataWithOptions, eval = os_linux}
isotopicData <- getData(
  name = "IsoMedIta Humans 21-12-22 - CSV",
  options = dataOptions(sep = ";")) 
isotopicData  %>% 
  head(5)  %>% 
  knitr::kable()
```